<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core">
<h:head>
	<title>Gestion des utilisateurs</title>

</h:head>

<h:body>
		<p:megaMenu orientation="#{megaMenuView.orientation}" style="margin-top:50px">
    	<p:submenu label="Consultation CRA"></p:submenu>
    	
    	<p:submenu label="Gestion de projets">
    	<p:column>
    		<p:submenu>
    		<p:menuitem value="Ajouter un projet" url="#"/>
    		<p:menuitem value="Lister les projets" url="/List_projets.xhtml"/>
    		</p:submenu>
    	</p:column>
    	</p:submenu>
    	<p:submenu label="Gestion de campagnes">
    	<p:column>
    		<p:submenu>
    		<p:menuitem value="Ajouter une campagne" url="#"/>
    		<p:menuitem value="Lister les campagnes" url="#"/>
    		</p:submenu>
    	</p:column>
    	</p:submenu>
    	<p:submenu label="Gestion des utilisateurs">
    	<p:column>
    		<p:submenu>
    		<p:menuitem value="Ajouter un utilisateur" onclick="PF('dialogAddUser').show()" url="#"/>
    		<p:menuitem value="Lister les utilisateurs" update=":users:listUsers" url="#"/>
    		</p:submenu>
    	</p:column>
    	</p:submenu>
    	</p:megaMenu>
    	 
    	<h:form id="users">
		<p:dataTable id="listUsers" value="#{listUsersBean.users}" var="u">
		<p:column headerText="Nom">
			<h:outputText value="#{u.nom}" />
		</p:column>
		Â 
		<p:column headerText="Prenom">
			<h:outputText value="#{u.prenom}" />
		</p:column>
		
		<p:column headerText="Email">
			<h:outputText value="#{u.email}" />
		</p:column>
		</p:dataTable>
	
		<p:commandButton value="Ajouter utilisateur" styleclass="ui-priority-primary"
		onclick="PF('dialogAddUser').show()"/>
		
		</h:form>
		
		<p:dialog
		widgetVar="dialogAddUser"
		closable="true"
		header="Ajouter collaborateur">
		<h:form id='FormAddUser'>
		<table>
			<tr>
				<td><label>Nom</label></td>
				<td><p:inputText id="nom" placeholder="Nom" value="#{listUsersBean.user.nom}" required="true"
						requiredMessage="le nom est obligatoire"></p:inputText>
				</td>
			</tr>
			<tr>
				<td><label>Prenom</label></td>
				<td><p:inputText id="prenom" placeholder="Prenom" value="#{listUsersBean.user.prenom}" required="true"
						requiredMessage="le prenom est obligatoire"></p:inputText>
				</td>
			</tr>
			<tr>
				<td><label>Email</label></td>
				<td><p:inputText id="email" placeholder="xyz@gmail.com" value="#{listUsersBean.user.email}" required="true"
						requiredMessage="l'email est obligatoire"></p:inputText>
				</td>
			</tr>
			<tr>
				<td><label>Login</label></td>
				<td><p:inputText id="login" placeholder="Nom d'utilisateur" value="#{listUsersBean.user.login}" required="true"
						requiredMessage="le nom d'utilisateur est obligatoire"></p:inputText>
				</td>
			</tr>
			<tr>
				<td><label>Mot de passe</label></td>
				<td><p:password id="pwd" placeholder="Mot de passe" value="#{listUsersBean.user.password}" required="true"
						requiredMessage="le mot de passe est obligatoire"></p:password>
				</td>
			</tr>
			<tr>
				<td><p:commandButton action="#{listUsersBean.addUser()}" value="Valider" oncomplete="PF('dialogAddUser').hide()" update=":users:listUsers">
				</p:commandButton>
				</td>
				<td><p:commandButton onclick="PF('dialogAddUser').hide()" value="Annuler"></p:commandButton></td>
			</tr>

		</table>
		
		</h:form>
		</p:dialog>
</h:body>		
</html>